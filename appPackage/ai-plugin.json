{
    "$schema": "https://developer.microsoft.com/json-schemas/copilot/plugin/v2.4/schema.json",
    "schema_version": "v2.4",
    "name_for_human": "${{NAME_FOR_HUMAN}}",
    "description_for_human": "${{NAME_FOR_HUMAN}}${{APP_NAME_SUFFIX}}",
    "contact_email": "publisher-email@example.com",
    "namespace": "${{NAMESPACE}}",
    "functions": [
        {
            "name": "Fabric_DataAgent",
            "description": "Agent to answer questions about sales and media spend for brand, categories, and markets."
        },
        {
            "name": "knowledge_base_retrieve",
            "description": "Knowledge Base Retrieval tool to ask questions. Provide this tool with a list of \"knowledgeAgentIntents\" so that the knowledge base can reason over what information should be retrieved from its knowledge sources.",
            "states": {
                "reasoning": {
                    "instructions": [
                        "***Always*** ensure tool argument is structured as {\"request\":{\"knowledgeAgentIntents\":[\"<intent from prompt>\"]}} where knowledgeAgentIntents is an ARRAY of strings"
                    ]
                }
            }
        }
    ],
    "runtimes": [
        {
            "type": "RemoteMCPServer",
            "spec": {
                "url": "${{FABRIC_AGENT_MCP_ENDPOINT}}",
                "x-mcp_tool_description": {
                    "tools": [
                        {
                            "name": "Fabric_DataAgent",
                            "description": "Agent to answer questions about sales and media spend for brand, categories, and markets.",
                            "inputSchema": {
                                "type": "object",
                                "properties": {
                                    "userQuestion": {
                                        "description": "Natural language question that can be answered by the Data Agent.",
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "userQuestion"
                                ]
                            }
                        }
                    ]
                }
            },
            "run_for_functions": [
                "Fabric_DataAgent"
            ]
        },
        {
            "type": "RemoteMCPServer",
            "auth": {
                "type": "OAuthPluginVault",
            "reference_id": "${{MCP_DA_AUTH_ID_AZURE}}"
            },
            "spec": {
                "url": "${{FOUNDRY_IQ_ENDPOINT}}",
                "enable_dynamic_discovery": false,
                "x-mcp_tool_description": {
                    "tools": [
                        {
                            "name": "knowledge_base_retrieve",
                            "description": "Knowledge Base Retrieval tool to ask questions. Provide this tool with a list of \"knowledgeAgentIntents\" so that the knowledge agent can reason over what information should be retrieved from its knowledge sources. Here is a sample input - #SAMPLE INPUT START# KnowledgeAgentIntents- [\"This is intent 1\", \"This is intent 2\", \"This is intent 3\"] #SAMPLE INPUT END#.  Description of this knowledge base - Contains Survey data.",
                            "inputSchema": {
                                "type": "object",
                                "properties": {
                                    "request": {
                                        "description": "Provide this tool with a list of \"knowledgeAgentIntents\" so that the knowledge base can reason over what information should be retrieved from its knowledge sources.",
                                        "type": "object",
                                        "properties": {
                                            "knowledgeAgentIntents": {
                                                "type": [
                                                    "array",
                                                    "null"
                                                ],
                                                "items": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                },
                                "required": [
                                    "request"
                                ]
                            }
                        }
                    ]
                }
            },
            "run_for_functions": [
                "knowledge_base_retrieve"
            ]
        }
    ]
}